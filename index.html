<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>萝卜的博客</title><meta name="author" content="Radish"><meta name="copyright" content="Radish"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="萝卜的博客">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="萝卜的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/touxiang.jpg">
<meta property="article:author" content="Radish">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/touxiang.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '萝卜的博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-03-27 23:58:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/modify.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E9%9F%B3%E4%B9%90"><i class="fa-fw /music/"></i><span> 0</span></a></li><li><a class="site-page child" href="/%E8%A7%86%E9%A2%91"><i class="fa-fw /movies/"></i><span> 1</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="萝卜的博客"><span class="site-name">萝卜的博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/message/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E9%9F%B3%E4%B9%90"><i class="fa-fw /music/"></i><span> 0</span></a></li><li><a class="site-page child" href="/%E8%A7%86%E9%A2%91"><i class="fa-fw /movies/"></i><span> 1</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/03/27/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B(%E4%BA%8C)-%E5%AF%BC%E8%87%B4JVM%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E7%9A%84ThreadLocal%E8%AF%A6%E8%A7%A3/" title="并发编程(二)-导致JVM内存泄露的ThreadLocal详解">并发编程(二)-导致JVM内存泄露的ThreadLocal详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-27T13:25:00.000Z" title="发表于 2024-03-27 21:25:00">2024-03-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">并发编程</a></span></div><div class="content">1、为什么要有ThreadLoacal我们首先来看看一段最纯粹的原生 JDBC 代码 


可以看到，在使用 JDBC 时，我们首先要配置后再拿到 JDBC 连接，然后在增删改查的业务方法中拿到这个连接，并把我们的 SQL 语句交给 JDBC 连接发送到真实的 DB 上执行。
在实际的工作中， 我们不会每次执行 SQL 语句时临时去建立连接，而是会借助数据库连接池， 同时因为实际业务的复杂性，为了保证数据的一致性，我们还会引入事务操作，于是上面的代码就会变成：



但是上面的代码包含什么样的问题呢？分析代码我们可以发现， 执行业务方法 business 时， 为了启用事务， 我们从数据库连接池中拿了一个连接， 但是在具体的 insert 方法和 getAll 方法中， 在执行具体的 SQL 语句时， 我们从数据库连接池中拿一个连接， 这就说执行事务和执行 SQL 语句完全是不同的数据库连接， 这会导致什么问题？事务失效了！ ！数据库执行事务时，事务的开启和提交、语句的执行等都是必须在一个连接中的。实际上，上面的代码要保证数据的一致性， 就必须要启用分布式事务。
怎么解决这个问题呢？  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/03/20/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%89)-SpringMVC%E9%87%8D%E7%82%B9%E5%8A%9F%E8%83%BD%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十三)-SpringMVC重点功能底层源码解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十三)-SpringMVC重点功能底层源码解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/20/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%89)-SpringMVC%E9%87%8D%E7%82%B9%E5%8A%9F%E8%83%BD%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十三)-SpringMVC重点功能底层源码解析">Spring源码(十三)-SpringMVC重点功能底层源码解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-20T13:22:00.000Z" title="发表于 2024-03-20 21:22:00">2024-03-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">疑问1：
当我们使用@RequestParam，并且没有注册StringToUserEditor时，但是User中提供了一个String类型参数的构造方法时：
12345@RequestMapping(method = RequestMethod.GET, path = "/test")@ResponseBodypublic String test(@RequestParam("name") User user) {    return user.getName();}

12345678910111213141516public class User {    private String name;    public User(String name) {        this.name = name;    }    public String getName() {        return name;    }    public void setName(St ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/03/14/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%BA%8C)-SpringMVC%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90(%E6%9C%AA%E5%AE%8C)/" title="Spring源码(十二)-SpringMVC启动与请求处理流程解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十二)-SpringMVC启动与请求处理流程解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/14/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%BA%8C)-SpringMVC%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90(%E6%9C%AA%E5%AE%8C)/" title="Spring源码(十二)-SpringMVC启动与请求处理流程解析">Spring源码(十二)-SpringMVC启动与请求处理流程解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-14T15:05:00.000Z" title="发表于 2024-03-14 23:05:00">2024-03-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">SpringMVC的作用毋庸置疑，虽然我们现在都是用SpringBoot，但是SpringBoot中仍然是在使用SpringMVC来处理请求。
我们在使用SpringMVC时，传统的方式是通过定义web.xml，比如：
12345678910111213141516&lt;web-app&gt;    &lt;servlet&gt;        &lt;servlet-name&gt;app&lt;/servlet-name&gt;        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;        &lt;init-param&gt;            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;            &lt;param-value&gt;/WEB-INF/spring.xml&lt;/param-value&gt;        &lt;/in ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/03/14/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B(%E4%B8%80)-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%B9%B6%E5%8F%91%E3%80%81%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%AD%89%E5%BE%85%E9%80%9A%E7%9F%A5%E6%9C%BA%E5%88%B6/" title="并发编程(一)-深入理解并发、线程与等待通知机制">并发编程(一)-深入理解并发、线程与等待通知机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-14T15:05:00.000Z" title="发表于 2024-03-14 23:05:00">2024-03-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">并发编程</a></span></div><div class="content">一、基础概念1、进程和线程
进程是程序运行资源分配（以内存为主）的最小单位。

线程是 CPU 调度的最小单位。


大厂面试题：进程间的通信同一台计算机的进程通信称为 IPC（Inter-process communica），不同计算机之间的进程通信被称为 R(mote)PC，需要通过网络，并遵守共同的协议，比如大家熟悉的 Dubbo 就是一个 RPC 框架， 而 H协议也经常用在 RPC 上， 比如 SpringCloud 微服务。 
大厂常见的面试题就是，进程间通信有几种方式？ 

管道， 分为匿名管道（pipe）及命名管道（named pipe）：匿名管道可用 于具有亲缘关系的父 子进程间的通信，命名管道除了具有管道所具有的功能外， 它还允许无亲缘关系进程间的通信。 
信号（signal）：信号是在软件层次上对中断机制的一种模拟，它是比较 复杂的通信方式， 用 于通知进程有某事件发生， 一个进程收到一个信号与处理器 收到一个中断请求效果上可以说是一致 的。 
消息队列（message queue）：消息队列是消息的链接表，它克服了上两 种通信方式中信号量有 限的缺点， 具有写权 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/03/12/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%80)-Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十一)-Spring之事务底层源码解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十一)-Spring之事务底层源码解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/12/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%80)-Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十一)-Spring之事务底层源码解析">Spring源码(十一)-Spring之事务底层源码解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-12T15:49:00.000Z" title="发表于 2024-03-12 23:49:00">2024-03-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">@EnableTransactionManagement工作原理开启Spring事务本质上就是增加了一个Advisor，但我们使用@EnableTransactionManagement注解来开启Spring事务是，该注解代理的功能就是向Spring容器中添加了两个Bean：

AutoProxyRegistrar
ProxyTransactionManagementConfiguration

AutoProxyRegistrar主要的作用是向Spring容器中注册了一个InfrastructureAdvisorAutoProxyCreator的Bean。而InfrastructureAdvisorAutoProxyCreator继承了AbstractAdvisorAutoProxyCreator，所以这个类的主要作用就是开启自动代理的作用，也就是一个BeanPostProcessor，会在初始化后步骤中去寻找Advisor类型的Bean，并判断当前某个Bean是否有匹配的Advisor，是否需要利用动态代理产生一个代理对象。​
ProxyTransactionManagementC ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/03/09/Spring%E6%BA%90%E7%A0%81(%E5%8D%81)-Spring%E4%B9%8BAOP%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十)-Spring之AOP底层源码解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十)-Spring之AOP底层源码解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/09/Spring%E6%BA%90%E7%A0%81(%E5%8D%81)-Spring%E4%B9%8BAOP%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十)-Spring之AOP底层源码解析">Spring源码(十)-Spring之AOP底层源码解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-09T14:39:00.000Z" title="发表于 2024-03-09 22:39:00">2024-03-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">动态代理代理模式的解释：为其他对象提供一种代理以控制对这个对象的访问，增强一个类中的某个方法，对程序进行扩展。
比如，现在存在一个UserService类：
12345public class UserService  { public void test() {  System.out.println("test..."); }}

 此时，我们new一个UserService对象，然后执行test()方法，结果是显而易见的。
如果我们现在想在不修改UserService类的源码前提下，给test()增加额外逻辑，那么就可以使用动态代理机制来创建UserService对象了，比如： 
123456789101112131415161718192021222324252627public class Test {	public static void main(String[] args) {		UserService target = new UserService();		// 通过cglib技术		E ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/03/09/Spring%E6%BA%90%E7%A0%81(%E4%B9%9D)-Spring%E4%B9%8B%E6%95%B4%E5%90%88MyBatis%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(九)-Spring之整合MyBatis底层源码解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(九)-Spring之整合MyBatis底层源码解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/09/Spring%E6%BA%90%E7%A0%81(%E4%B9%9D)-Spring%E4%B9%8B%E6%95%B4%E5%90%88MyBatis%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(九)-Spring之整合MyBatis底层源码解析">Spring源码(九)-Spring之整合MyBatis底层源码解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-09T10:51:00.000Z" title="发表于 2024-03-09 18:51:00">2024-03-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/03/09/Spring%E6%BA%90%E7%A0%81(%E5%85%AB)-Spring%E4%B9%8B%E9%85%8D%E7%BD%AE%E7%B1%BB%E8%A7%A3%E6%9E%90%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(八)-Spring之配置类解析源码解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(八)-Spring之配置类解析源码解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/09/Spring%E6%BA%90%E7%A0%81(%E5%85%AB)-Spring%E4%B9%8B%E9%85%8D%E7%BD%AE%E7%B1%BB%E8%A7%A3%E6%9E%90%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(八)-Spring之配置类解析源码解析">Spring源码(八)-Spring之配置类解析源码解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-09T10:36:00.000Z" title="发表于 2024-03-09 18:36:00">2024-03-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">解析配置类解析配置类流程图：https://www.processon.com/view/link/5f9512d5e401fd06fda0b2dd解析配置类思维脑图：https://www.processon.com/view/link/614c83cae0b34d7b342f6d14

在启动Spring时，需要传入一个AppConfig.class给ApplicationContext，ApplicationContext会根据AppConfig类封装为一个BeanDefinition，这种BeanDefinition我们把它称为配置类BeanDefinition。
ConfigurationClassPostProcessor中会把配置类BeanDefinition取出来
构造一个ConfigurationClassParser用来解析配置类BeanDefinition，并且会生成一个配置类对象ConfigurationClass
如果配置类上存在@Component注解，那么解析配置类中的内部类（这里有递归，如果内部类也是配置类的话）
如果配置类上存在@PropertySou ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/03/05/Spring%E6%BA%90%E7%A0%81(%E4%B8%83)-Spring%E4%B9%8B%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(七)-Spring之启动过程源码解析"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(七)-Spring之启动过程源码解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/05/Spring%E6%BA%90%E7%A0%81(%E4%B8%83)-Spring%E4%B9%8B%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(七)-Spring之启动过程源码解析">Spring源码(七)-Spring之启动过程源码解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-05T14:49:00.000Z" title="发表于 2024-03-05 22:49:00">2024-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">推断构造方法流程图：https://www.processon.com/view/link/5f97bc717d9c0806f291d7eb 
前言通常，我们说的Spring启动，就是构造ApplicationContext对象以及调用refresh()方法的过程。 
首先，Spring启动过程主要做了这么几件事情：

构造一个BeanFactory对象
解析配置类，得到BeanDefinition，并注册到BeanFactory中
解析@ComponentScan，此时就会完成扫描
解析@Import
解析@Bean
…


因为ApplicationContext还支持国际化，所以还需要初始化MessageSource对象
因为ApplicationContext还支持事件机制，所以还需要初始化ApplicationEventMulticaster对象
把用户定义的ApplicationListener对象添加到ApplicationContext中，等Spring启动完了就要发布事件了
创建非懒加载的单例Bean对象，并存在BeanFactory的单例池中。
调用Lifecycl ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/03/05/Spring%E6%BA%90%E7%A0%81(%E5%85%AD)-Spring%E4%B9%8B%E6%8E%A8%E6%96%AD%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" title="Spring源码(六)-Spring之推断构造方法"><img class="post-bg" src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(六)-Spring之推断构造方法"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/03/05/Spring%E6%BA%90%E7%A0%81(%E5%85%AD)-Spring%E4%B9%8B%E6%8E%A8%E6%96%AD%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95/" title="Spring源码(六)-Spring之推断构造方法">Spring源码(六)-Spring之推断构造方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-04T16:08:00.000Z" title="发表于 2024-03-05 00:08:00">2024-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/">Spring</a></span></div><div class="content">推断构造方法流程图：https://www.processon.com/view/link/5f97bc717d9c0806f291d7eb 
前言Spring中的一个bean，需要实例化得到一个对象，而实例化就需要用到构造方法。 
一般情况下，一个类只有一个构造方法：

要么是无参的构造方法
要么是有参的构造方法

如果只有一个无参的构造方法，那么实例化就只能使用这个构造方法了。如果只有一个有参的构造方法，那么实例化时能使用这个构造方法吗？要分情况讨论： 

使用AnnotationConfigApplicationContext，会使用这个构造方法进行实例化，那么Spring会根据构造方法的参数信息去寻找bean，然后传给构造方法
使用ClassPathXmlApplicationContext，表示使用XML的方式来使用bean，要么在XML中指定构造方法的参数值(手动指定)，要么配置autowire=constructor让Spring自动去寻找bean做为构造方法参数值。

上面是只有一个构造方法的情况，那么如果有多个构造方法呢？
又分为两种情况，多个构造方法中存不 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">…</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">Radish</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">愿内心深处的懦弱 不再将我吞噬</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/27/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B(%E4%BA%8C)-%E5%AF%BC%E8%87%B4JVM%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E7%9A%84ThreadLocal%E8%AF%A6%E8%A7%A3/" title="并发编程(二)-导致JVM内存泄露的ThreadLocal详解">并发编程(二)-导致JVM内存泄露的ThreadLocal详解</a><time datetime="2024-03-27T13:25:00.000Z" title="发表于 2024-03-27 21:25:00">2024-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/20/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%89)-SpringMVC%E9%87%8D%E7%82%B9%E5%8A%9F%E8%83%BD%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十三)-SpringMVC重点功能底层源码解析"><img src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十三)-SpringMVC重点功能底层源码解析"></a><div class="content"><a class="title" href="/2024/03/20/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%89)-SpringMVC%E9%87%8D%E7%82%B9%E5%8A%9F%E8%83%BD%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十三)-SpringMVC重点功能底层源码解析">Spring源码(十三)-SpringMVC重点功能底层源码解析</a><time datetime="2024-03-20T13:22:00.000Z" title="发表于 2024-03-20 21:22:00">2024-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%BA%8C)-SpringMVC%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90(%E6%9C%AA%E5%AE%8C)/" title="Spring源码(十二)-SpringMVC启动与请求处理流程解析"><img src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十二)-SpringMVC启动与请求处理流程解析"></a><div class="content"><a class="title" href="/2024/03/14/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%BA%8C)-SpringMVC%E5%90%AF%E5%8A%A8%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E8%A7%A3%E6%9E%90(%E6%9C%AA%E5%AE%8C)/" title="Spring源码(十二)-SpringMVC启动与请求处理流程解析">Spring源码(十二)-SpringMVC启动与请求处理流程解析</a><time datetime="2024-03-14T15:05:00.000Z" title="发表于 2024-03-14 23:05:00">2024-03-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/14/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B(%E4%B8%80)-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%B9%B6%E5%8F%91%E3%80%81%E7%BA%BF%E7%A8%8B%E4%B8%8E%E7%AD%89%E5%BE%85%E9%80%9A%E7%9F%A5%E6%9C%BA%E5%88%B6/" title="并发编程(一)-深入理解并发、线程与等待通知机制">并发编程(一)-深入理解并发、线程与等待通知机制</a><time datetime="2024-03-14T15:05:00.000Z" title="发表于 2024-03-14 23:05:00">2024-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/12/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%80)-Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十一)-Spring之事务底层源码解析"><img src="/../img/spring-%E5%B0%81%E9%9D%A2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码(十一)-Spring之事务底层源码解析"></a><div class="content"><a class="title" href="/2024/03/12/Spring%E6%BA%90%E7%A0%81(%E5%8D%81%E4%B8%80)-Spring%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Spring源码(十一)-Spring之事务底层源码解析">Spring源码(十一)-Spring之事务底层源码解析</a><time datetime="2024-03-12T15:49:00.000Z" title="发表于 2024-03-12 23:49:00">2024-03-12</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/"><span class="card-category-list-name">Java后端</span><span class="card-category-list-count">42</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/Spring/"><span class="card-category-list-name">Spring</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/Springboot/"><span class="card-category-list-name">Springboot</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="card-category-list-name">并发编程</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">26</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/"><span class="card-category-list-name">MongoDB</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"><span class="card-category-list-name">MySQL</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/"><span class="card-category-list-name">Redis</span><span class="card-category-list-count">11</span></a></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Spring/" style="font-size: 1.5em; color: #99a9bf">Spring</a> <a href="/tags/Linux/" style="font-size: 1.1em; color: #999">Linux</a> <a href="/tags/redis/" style="font-size: 1.42em; color: #99a6b7">redis</a> <a href="/tags/MongoDB/" style="font-size: 1.26em; color: #999fa8">MongoDB</a> <a href="/tags/ShardingJDBC/" style="font-size: 1.1em; color: #999">ShardingJDBC</a> <a href="/tags/MySQL/" style="font-size: 1.34em; color: #99a3b0">MySQL</a> <a href="/tags/Java/" style="font-size: 1.18em; color: #999ca1">Java</a> <a href="/tags/Springboot/" style="font-size: 1.1em; color: #999">Springboot</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 1.18em; color: #999ca1">并发编程</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">9</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">45</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishdate="2023-05-24T15:48:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastpushdate="2024-03-27T15:58:14.716Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2023 - 2024 By Radish</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>